<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Draw.io Editor</title>
<script type="text/javascript">
	// To Avoid NPE in connectUtils
	urlParams = {};
</script>
<script src="connectUtils-1-4-8.js" type="text/javascript"></script>
<style type="text/css">
	html, body {
	  height:100%;
	  overflow:hidden;
	}
	body {
		background-color:#ffffff;
		background-image:url(/images/logo-flat.png);
		background-repeat:no-repeat;
		background-position:center;
		font-family:Arial,Sans-Serif;
		overflow:hidden;
		width:100%;
		margin:0;
	}
</style>
</head>
<body>
<script type="text/javascript">
	var xdm_e = AC.getUrlParam('xdm_e', true);
	var baseUrl = xdm_e + AC.getUrlParam('cp', true);
	var license = AC.getUrlParam('lic', false);
	var connectUrl = baseUrl + '/atlassian-connect';
	var head = document.getElementsByTagName('head')[0];
	
	var script = document.createElement('script');
	script.setAttribute('data-options', 'resize:false;margin:false');
	
	if (license != null && license == 'none')
	{
		if (xdm_e != null && (xdm_e == "https://drawio.atlassian.net" || xdm_e.indexOf('ngrok') > -1))
		{
			console.log("License status = ", license);
		}
		else
		{
			alert("Please install a license for the draw.io app");
		}
	}

	// Main
	script.onload = function()
	{
		AP.sizeToParent(true);
		AC.initAsync(baseUrl);
	};
	script.src = connectUrl + '/all.js';
	head.appendChild(script);
	
	var link = document.createElement('link');
	link.type = 'text/css';
	link.rel = 'stylesheet';
	link.href = connectUrl + '/all.css';
	head.appendChild(link);
</script>
</body>
</html>
